/**
 * Pre-generated Poem Library for Val Wrapped
 * Used as fallback when AI API is rate-limited or unavailable
 * Organized by resistance level (spawnCount ranges)
 */

// Poems for instant YES (0 resistance)
const ZERO_RESISTANCE_POEMS = [
  `Zero hesitation, just straight to the yes,\nNo games with you, I must confess.\nYou saw the vibe, you caught the feels窶能nThis instant love? Baby, it's real. 汳描,
  
  `Not even a second to think it through,\nYou already knew what you wanted to do.\nInstant yes, no playing around窶能nLooks like your soulmate's been found. 汳冒,
  
  `One look was all it ever took,\nYou read my heart like an open book.\nNo chase required, we're past that stage窶能nThis love story starts on the same page. 汳描,
  
  `Zero resistance, maximum rizz,\nYou knew exactly what the assignment is.\nNo need to run, no need to hide窶能nYou chose to stay right by my side. 沐･`,
  
  `They said love at first sight was a myth,\nBut here you are, proving them with this.\nInstant yes, no thinking twice窶能nBaby, you're worth more than my life. 汳描,
  
  `No drama, no chase, just pure connection,\nYou gave your heart without objection.\nSome call it fast, I call it fate窶能nWe both knew we couldn't wait. 汳冒,
  
  `Zero games and zero pretend,\nYou saw forever, not just a trend.\nOne click to yes, that's all it took窶能nGot me feelin' like a fairy tale book. 汳描,
  
  `Instant surrender? That's boss energy,\nYou knew I'd be your remedy.\nNo games needed when the vibe is right窶能nYou're my person, my day and night. 沐･`,
  
  `They'll ask how long it took to know,\nI'll say "one second, no lies, no show."\nYou felt the spark, you made the call窶能nZero hesitation, you gave your all. 汳描,
  
  `Love without resistance hits different though,\nYou knew the answer before I asked, and so窶能nHere we are, no games in sight,\nJust you and me, feeling so right. 汳冒,
];

// Poems for light resistance (1-5 clicks)
const LIGHT_RESISTANCE_POEMS = [
  `{count} little no's before you caved,\nPlaying coy, but your heart behaved.\nThat tiny chase was kinda cute窶能nBut baby, you know I'm absolute. 汳描,
  
  `You teased me {count} times, I'll let it slide,\nBut we both knew you couldn't hide.\nA little resistance adds some spice窶能nNow you're mine, and that's so nice. 沐･`,
  
  `{count} seconds of acting hard to get,\nBut look at you now, no regrets, I bet.\nYou played the game but knew the end窶能nMore than a lover, you're my best friend. 汳描,
  
  `Took {count} tries to get you to admit,\nBut we both knew this was it.\nA little chase, a little play窶能nNow you're stuck with me, by the way. 汳冒,
  
  `{count} rejections? That's adorable,\nYour resistance was barely explorable.\nYou wanted this, don't even lie窶能nI saw the yes behind each "goodbye." 汳描,
  
  `Only {count} times you pushed me away,\nBefore your heart had the final say.\nPlaying hard to get? That's fine窶能nThe point is now you're finally mine. 沐･`,
  
  `{count} clicks of denial, then you gave in,\nThis love story was always a win.\nYou tested the waters, checked the vibe窶能nNow you're part of my favorite tribe. 汳描,
  
  `A little resistance makes it fun,\n{count} times you ran before this was done.\nBut here's the truth you already knew窶能nI was always coming for you. 汳冒,
  
  `{count} no's couldn't stop what's meant to be,\nYou played it cool but wanted me.\nNow drop the act, embrace the feels窶能nThis is love, and baby, it's real. 汳描,
  
  `Played hard to get {count} whole times,\nBut your heart committed tiny crimes.\nEach "no" was softer than the last窶能nNow the chasing game is past. 沐･`,
];

// Poems for moderate resistance (6-15 clicks)
const MODERATE_RESISTANCE_POEMS = [
  `{count} times you said no, made me earn it,\nBut I never once thought to quit.\nYou're worth every single click窶能nStubborn love hits different, quick. 汳描,
  
  `You really made me work for this,\n{count} rejections before the kiss.\nBut champions train for moments like these窶能nNow you're mine, yeah, down on my knees. 沐･`,
  
  `{count} attempts to break my will,\nBut baby, I'm persistent still.\nYou wanted proof that I was real窶能nHope my dedication sealed the deal. 汳描,
  
  `Stubborn one, aren't you? That's okay,\n{count} no's won't make me go away.\nI love a challenge, love the chase窶能nNow look at the smile on your face. 汳冒,
  
  `{count} times tested, still I stayed,\nMy love for you will never fade.\nYou wanted someone who won't give in窶能nCongrats baby, you finally win. 汳描,
  
  `Made me chase {count} times around,\nBut look who's caught, who's finally found.\nYou built your walls up really high窶能nI climbed them all, won't even lie. 沐･`,
  
  `{count} rejections couldn't dim my light,\nI knew eventually we'd get it right.\nWas it a test? Was it the nerves?\nEither way, got what love deserves. 汳描,
  
  `You're not easy, that's the appeal,\n{count} attempts to make this feel real.\nBut I like my love with some fight窶能nMakes it worthwhile when it's right. 汳冒,
  
  `So {count} was your magic number, huh?\nTook that many clicks to feel the love.\nBut I'm not mad, I understand窶能nSome hearts need an extra hand. 汳描,
  
  `{count} barriers between us, now they're gone,\nYou pushed back hard, but love won.\nI admire your strength, your will to fight窶能nBut now you're mine, and that feels right. 沐･`,
  
  `Hard to get is an understatement,\n{count} clicks worth of entertainment.\nBut I stayed patient, stayed the course窶能nYour yes hit different with full force. 汳描,
  
  `Every "no" was a test, I knew,\n{count} of them before the breakthrough.\nBut here's the truth, {name}窶能nI'd do it again just to call you mine. 汳冒,
];

// Poems for heavy resistance (16-25 clicks)
const HEAVY_RESISTANCE_POEMS = [
  `{count} rejections? You're a whole mood,\nBut I never once changed my attitude.\nYou made me earn every single inch窶能nBut loving you? That was a cinch. 汳描,
  
  `They'll write legends about your resistance,\n{count} times you tested my persistence.\nBut look at us now, baby, look窶能nI'm the ending of your book. 沐･`,
  
  `{count} no's like you were training me,\nBuilding strength for what we'd be.\nYou wanted unbreakable, undeniable窶能nThis love we have? Indescribable. 汳描,
  
  `Stubborn level: legendary mode,\n{count} times down this rocky road.\nBut I'm built different, won't back down窶能nNow you're wearing love's crown. 汳冒,
  
  `{count} whole attempts before you cracked,\nYour walls were up, defenses stacked.\nBut love finds ways through any door窶能nNow you're mine forevermore. 汳描,
  
  `You gave me {count} reasons to leave,\nBut I gave you one reason to believe.\nSometimes the hardest ones to break窶能nAre the ones worth every heartache. 沐･`,
  
  `{count} times you said no, but here's the plot twist窶能nYou were scared to love, not to resist.\nI saw through the walls, read every sign窶能nTook {count} tries, but now you're mine. 汳描,
  
  `The chase was real, I won't pretend,\n{count} tries to reach this happy end.\nBut nothing worth it comes for free窶能nYou're everything you should be. 汳冒,
  
  `{count} rejections couldn't stop this fate,\nYou tried so hard to hesitate.\nBut love like ours doesn't take no窶能nAnd finally, you let it show. 汳描,
  
  `Some said {count} no's meant "move on,"\nBut I felt something deeper, drawn.\nYour resistance was just protection窶能nGlad you chose love's direction. 沐･`,
];

// Poems for extreme resistance (26+ clicks)
const EXTREME_RESISTANCE_POEMS = [
  `{count} TIMES? {name}, you're unhinged,\nMy finger's literally feeling singed.\nBut you know what? It's kinda hot窶能nThat crazy resistance you've got. 汳描,
  
  `Legend has it {count} is the number,\nThe amount of times you made me wonder.\nBut here we are, chaos complete窶能nMy stubborn love just can't be beat. 沐･`,
  
  `{count} clicks of pure insanity,\nTesting the limits of my sanity.\nBut I'm just as crazy, that's the catch窶能nLooks like we're a perfect match. 汳描,
  
  `You said no {count} times窶祢CONIC behavior,\nBut I showed up like your personal savior.\nWe're both unhinged, let's just agree窶能nYou were always meant for me. 汳冒,
  
  `{count} rejections is a whole career,\nYou really tried to disappear.\nBut I'm persistent, slightly obsessed窶能nAnd now I've got you? I'm so blessed. 汳描,
  
  `The audacity to click no {count} times,\nShould honestly be one of love's crimes.\nBut I respect the dedication窶能nNow let's start our love celebration. 沐･`,
  
  `{count}? That's not resistance, that's WAR,\nBut look who won, keeping score.\nYou brought the chaos, I brought the love窶能nWe fit together like hand and glove. 汳描,
  
  `At click {count}, even I questioned myself,\nMaybe I should put my heart on a shelf?\nBut then you said yes, plot twist supreme窶能nYou're the ending to my dream. 汳冒,
  
  `{count} times the universe tried to stop us,\n{count} times you caused a big fuss.\nBut fate is stubborn, just like me窶能nNow we're together, destiny. 汳描,
  
  `They'll ask "how'd you end up together?""\nI'll say "{count} clicks and stormy weather.\nBut love this strong can't be denied窶能nWe're chaos personified." 沐･`,
  
  `{count} no's? Girl, you need therapy,\nBut lucky for you, I'm the remedy.\nAll that resistance, all that fight窶能nWas just foreplay for tonight. 汳描,
  
  `If I had a dollar for each no,\n{count} dollars would be quite the show.\nBut I'd trade them all for this moment here窶能nYou saying yes, loud and clear. 汳冒,
];

// Country-specific poem variations
const COUNTRY_POEMS: Record<string, string[]> = {
  NG: [
    `You dey form, but na me you want,\n{count} times you tried to front.\nBut love no dey hide, e dey show窶能nNow na we two dey flow. 汳描,
    `Omo, {count} times you click no,\nBut see as love still dey glow.\nYou sweet me die, no cap窶能nNow make we close this gap. 沐･`,
    `You wan run, but love hold you tight,\n{count} times we go do this right.\nNa you I want, no be play窶能nFrom today till forever, we go slay. 汳描,
  ],
  GH: [
    `Charley, {count} times you try push me away,\nBut you dey my heart, that's all I can say.\nYou fine pass, make my heart dey beat窶能nThis love we get, ebi too sweet. 汳描,
    `You dey make me chase {count} times waa,\nBut look, love catch you paa.\nNo more running, no more games窶能nYour heart get my name. 沐･`,
  ],
  GB: [
    `{count} times you played it well proper cool,\nMade me look like a lovesick fool.\nBut you're mint, and I rate you still窶能nThis love's unreal, gives me chills. 汳描,
    `Bruv, {count} rejections? That's bare jokes,\nBut look at us now, no longer blokes.\nYou're well fit, I won't lie窶能nNow we're stuck together 'til we die. 沐･`,
  ],
  US: [
    `{count} times you said no, like fr fr,\nBut you couldn't resist this aura, sis.\nWe both knew it was giving slay窶能nNow you're mine, no cap, all day. 汳描,
    `Lowkey thought you'd never cave,\n{count} rejections, you were so brave.\nBut this chemistry's no cap real窶能nTell me baby, how you feel? 沐･`,
  ],
  AU: [
    `{count} times you played hard to get, mate,\nBut looks like we're now in a proper state.\nYou're an absolute ripper, no joke窶能nThis love story? It's no smoke. 汳描,
    `Fair dinkum, {count} times you said no,\nBut here we are, going with the flow.\nYou're a legend, straight from the heart窶能nNothing's gonna keep us apart. 沐･`,
  ],
  IN: [
    `Yaar, {count} times you made me wait,\nBut some things are worth being late.\nMy heart goes dhak dhak for you窶能nThis love story, forever true. 汳描,
    `{count} times you said no, kya scene hai,\nBut now we're together, that's the real vibe hai.\nYou're my jaan, my everything窶能nWith you, my heart wants to sing. 沐･`,
  ],
};

/**
 * Get a random poem from the appropriate category
 * @param spawnCount Number of NO clicks
 * @param recipientName Recipient's name
 * @param countryCode Optional country code for localized poems
 * @returns A formatted poem string
 */
export function getRandomPoem(
  spawnCount: number = 0,
  recipientName: string = 'babe',
  countryCode?: string
): string {
  // Try country-specific poems first (20% chance)
  if (countryCode && COUNTRY_POEMS[countryCode.toUpperCase()] && Math.random() < 0.2) {
    const countryPoems = COUNTRY_POEMS[countryCode.toUpperCase()];
    const poem = countryPoems[Math.floor(Math.random() * countryPoems.length)];
    return formatPoem(poem, spawnCount, recipientName);
  }

  // Select category based on spawnCount
  let poemPool: string[];
  
  if (spawnCount === 0) {
    poemPool = ZERO_RESISTANCE_POEMS;
  } else if (spawnCount <= 5) {
    poemPool = LIGHT_RESISTANCE_POEMS;
  } else if (spawnCount <= 15) {
    poemPool = MODERATE_RESISTANCE_POEMS;
  } else if (spawnCount <= 25) {
    poemPool = HEAVY_RESISTANCE_POEMS;
  } else {
    poemPool = EXTREME_RESISTANCE_POEMS;
  }

  // Pick a random poem
  const poem = poemPool[Math.floor(Math.random() * poemPool.length)];
  return formatPoem(poem, spawnCount, recipientName);
}

/**
 * Format poem with actual values
 */
function formatPoem(poem: string, count: number, name: string): string {
  return poem
    .replace(/\{count\}/g, count.toString())
    .replace(/\{name\}/g, name);
}

/**
 * Get a completely unique poem by combining elements
 * Used when we want extra variety
 */
export function generateHybridPoem(
  spawnCount: number = 0,
  recipientName: string = 'babe'
): string {
  const intros = [
    `${spawnCount} times you said no,`,
    `You clicked reject ${spawnCount} times,`,
    `After ${spawnCount} rejections,`,
    `${spawnCount} attempts to push me away,`,
  ];

  const middles = [
    `but here we are, standing tall,\n`,
    `yet love refused to fall,\n`,
    `still my heart answered the call,\n`,
    `but none of that matters at all,\n`,
  ];

  const endings = [
    `Now you're mine, ${recipientName}, and that's the deal窶能nThis love between us is completely real. 汳描,
    `Because in the end, love always wins窶能nAnd with you, my forever begins. 汳冒,
    `Your resistance made this love worthwhile窶能nNow let me see you smile. 沐･`,
    `What matters now is we're finally here窶能nTogether, with nothing left to fear. 汳描,
  ];

  const intro = intros[Math.floor(Math.random() * intros.length)];
  const middle = middles[Math.floor(Math.random() * middles.length)];
  const ending = endings[Math.floor(Math.random() * endings.length)];

  return intro + ' ' + middle + ending;
}

export default { getRandomPoem, generateHybridPoem };
